var Dispatcher = {	init: function (argument) {		this.jsRandomImage = new JsRandomImage();		window.addEventListener("load", this);		window.addEventListener("resize", this);	},	handleEvent: function (e) {		switch (e.type) {			case "load":				var i;				this.jsRandomImage.resize();				this.jsRandomImage.randomPosition();				for (i = 120; i >= 0; i--) {					(function (i) {						setTimeout(function () {							document.getElementById("Counter").innerHTML = "倒數 " + i + " 秒";						}, 1000 * (120 - i));					})(i);					if (i % 10 === 0) {						(function (i) {							setTimeout(this.jsRandomImage.randomShow.bind(this.jsRandomImage), 1000 * (120 - i));						}.bind(this))(i);					}				}				break;			case "resize":				this.jsRandomImage.resize();				break;			default:				break;		}	}};function JsRandomImage () {	this.randomList = [];	this.appearedList = [];}JsRandomImage.prototype = {	randomPosition: function () {		var imageList = document.getElementsByTagName("li"),				region = document.getElementById("MainRegion"),				count = imageList.length,				index;				for (index = 0; index < count; index += 1) {			imageList[index].style.left = this._randomByFloor(0, region.clientWidth - imageList[index].clientWidth) + "px";			imageList[index].style.top = this._randomByFloor(0, region.clientHeight - imageList[index].clientHeight) + "px";			this.randomList.push(imageList[index]);		}	},	randomShow: function () {		var exist, rdm = -1, index, count = this.appearedList.length;		do {			exist = false;			rdm = this._randomByFloor(0, 11);			for (index = 0; index < count; index += 1) {				this.appearedList[index].className = "image invisible";				if (this.appearedList[index] === this.randomList[rdm]) {					exist = true;					break;				}			}			if (this.appearedList.length === this.randomList.length) {				exist = false;				rdm = -1;				for (index = 0; index < count; index += 1) {					this.appearedList[index].className = "image";				}			}		} while (exist);		if (rdm !== -1) {			this.randomList[rdm].className = "image";			this.appearedList.push(this.randomList[rdm]);		}	},	resize: function () {		var region = document.getElementById("MainRegion"),				height = window.innerHeight,				width = window.innerWidth;				if (width >= height) {			region.style.width = width * 0.7 + "px";		} else {			region.style.width = width * 0.8 + "px";		}		region.style.height = region.clientWidth / 4 * 3 + "px";	},	_randomByFloor: function (min, offset) {		return Math.floor(Math.random() * (offset + 1) + min);	}};Dispatcher.init();